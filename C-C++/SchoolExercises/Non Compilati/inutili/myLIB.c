#include<stdio.h>
#include<stdlib.h>
#include<time.h> 
#include<math.h>
#include"myLIB.h"
int randomInizializzato=0; //flag che indica se il generatore è già stato inizializzato

/*----------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ FUNZIONI DI CONTROLLO ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
------------------------------------------------------------------------------------------------------------------------------------------
Lista funzioni di confronto: 
1- range 
2- maggiore 
3- siNo
------------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
-----------------------------------------------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: Range 
-----------------------------------------------------------------------------------------------------------------------------------------*/

int range (int min, int max, int n){
	//dichiarazione di variabili di supporto
	int salvo;
		//controllo della validità dei parametri 
		if(min > max){
			salvo = min; 
			min = max; 
			max = salvo; 
		}
	//verifica che il numero non sia compreso
	if(n>max || n<min){
		return 0;
	}else
	//se l'esecuzione continua fino a qui dunque il numero è compreso
	return 1; 
}


/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: Maggiore 
-----------------------------------------------------------------------------------------------------------------------------------------*/

int maggiore (int n1, int n2){
	//controlli e return
	if(n1 > n2){
		return 1;
	}
	else if(n2 > n1){
		return 2;
	}
	else {
		return 0;
	}
}

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: siNo
-----------------------------------------------------------------------------------------------------------------------------------------*/

int siNo(){
    char c;
    //Ciclo sempre vero che legge fino a quando non ha in ingresso s/n
    while(1){
        scanf("%c",&c);
        if(c=='S'||c=='s') return 1;
        if(c=='N'||c=='n') return 0;
    }
}

/*----------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ FUNZIONI NUMERI RANDOM ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
------------------------------------------------------------------------------------------------------------------------------------------
Lista funzioni random
1- initRandom
2- casualeTra
3- doubleCasuale
4- doubleCasualeTra
5- intCasuale
------------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
-----------------------------------------------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: initRandom 
-----------------------------------------------------------------------------------------------------------------------------------------*/

void initRandom(){
    if(!randomInizializzato){
        srand(time(0));
        randomInizializzato=1;
    }
}

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: casualeTra 
-----------------------------------------------------------------------------------------------------------------------------------------*/

int casualeTra(int a, int b){
	//verifica che la funzione rand è inizializzata altrimenti la inizializza tramite la funzione inirRandom
    if(!randomInizializzato) initRandom();
    //controlla quale sia il maggiore
    if(a>b){
        int temp=a;
        a=b;
        b=temp;
    }
    return ((double)rand()/(double)RAND_MAX)*(b-a)+a;
}

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: doubleCasuale
-----------------------------------------------------------------------------------------------------------------------------------------*/

double doubleCasuale(){
	//verifica che la funzione rand è inizializzata altrimenti la inizializza tramite la funzione inirRandom
    if(!randomInizializzato) initRandom();
    return (double)rand()/(double)RAND_MAX;
}

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: doubleCasualeTra
-----------------------------------------------------------------------------------------------------------------------------------------*/

double doubleCasualeTra(double a, double b){
	//verifica che la funzione rand è inizializzata altrimenti la inizializza tramite la funzione inirRandom
    if(!randomInizializzato) initRandom();
    //controlla quale sia il maggiore
    if(a>b){
        double temp=a;
        a=b;
        b=temp;
    }
    return (doubleCasuale()*(b-a))+a;
}

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: intCasuale
-----------------------------------------------------------------------------------------------------------------------------------------*/

int intCasuale(int max){
    if(!randomInizializzato){
	initRandom();
}
    return doubleCasuale()*max;
}

/*--------------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ FUNZIONI PER LE DATE ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
----------------------------------------------------------------------------------------------------------------------------------------------
Lista funzioni date
1- isValidDate
2- dateToTimestamp
3- dateDiff
-----------------------------------------------------------------------------------------------------------------------------------------------
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
---------------------------------------------------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: isValidDate
-----------------------------------------------------------------------------------------------------------------------------------------*/

 int isValidDate (int gg,int mm,int aaaa){
  	//dichiarazione variabili di supporto
	int maxgg;
	//elaborazione & return
	if(aaaa<0){
		return 0;
	}
	else if(mm>0 && mm<=12){
		if (mm!=1&&mm!=3&&mm!=5&&mm!=7&&mm!=8&&mm!=10&&mm!=12){			
			if(mm!=4&&mm!=6&&mm!=9&&mm!=11){
				if(aaaa%400==0||(aaaa%4==0 && (aaaa%100!=0))){ //bisestile 
					maxgg= 29;
				}
				else{
					maxgg=28;
				}
			}
			else{
				maxgg=30;
			}
		}
		else{
			maxgg=31;
		} 
		if(gg>0 && gg<=maxgg){
			return 1;
		}
		else{
			return 0;
		}
	}
	else { //mese >12 o <0
		return 0;
	}
  } 	
  
/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: dateToTimestamp
-----------------------------------------------------------------------------------------------------------------------------------------*/

int dateToTimestamp (int gg,int mm,int aaaa,int bis){
   		while(aaaa != bis){
   				if(aaaa % 100 != 0 && aaaa % 4 == 0 ){
   						gg+=366;
				   }
				else{
						gg+=365;
				}
				aaaa--; 
		   }
		switch(mm){
			case 1:{
				gg+=0;
				break;
			} 
			case 2:{
				gg+= 31;
				break;
			}
			case 3:{
				gg+= 60;
				break;
			}
			case 4:{
				gg+= 91;
				break;
			}
			case 5:{
				gg+= 121;
				break;
			}
			case 6:{
				gg+= 152;
				break;
			}
			case 7:{
				gg+= 182;
				break;
			}
			case 8:{
				gg+= 213;
				break;
			}
			case 9:{
				gg+= 244;
				break;
			}
			case 10:{
				gg+= 274;
				break;
			}
			case 11:{
				gg+= 305;
				break;
			}
			case 12:{
				gg+= 335;
				break;
			}
		}
	return gg;
   }
  
/*-----------------------------------------------------------------------------------------------------------------------------------------
FUNZIONE: dateToTimestamp
-----------------------------------------------------------------------------------------------------------------------------------------*/

int dateDiff (int gg1, int mm1, int aaaa1, int gg2, int mm2, int aaaa2){
  	int min, diff, bisestile; 
  	min = aaaa1; 
  	if( aaaa2<min){
  		min = aaaa2;
	  }
	if( min % 100 != 0 && min % 4 == 0){
		bisestile = min; 
	}
	else{
		while(min % 100 == 0 && min % 4 != 0){
			min--; 
		}
		bisestile = min; 
	}
	gg1 = dateToTimestamp (gg1,mm1,aaaa1,bisestile); 
	gg2 = dateToTimestamp (gg2,mm2,aaaa2,bisestile); 
	
	if(gg2 < gg1){
		diff = (gg1-gg2);
	}
	else{
		diff = (gg2-gg1); 
	}
	return diff; 
  }
  
  //-----------------------------------------------------------------------------------------------------------------------------------------